---
title: "Michigan COVID-19 Mapping"
output: 
  flexdashboard::flex_dashboard:
    orientation: rows
    vertical_layout: fill
    theme: yeti
    runtime: shiny
    css: styles.css
    
---

Cumulative Cases {data-navmenu="Explorables"}
===================================== 
    
```{r setup, include=FALSE}

library(ggplot2)
library(plotly)
library(plyr)
library(readr)
library(deSolve)
library(knitr)

library(flexdashboard)
library (shiny)

load('Workspace2020-04-25-1587832621.RData')

# Convert times to date format for convenience
dates = startdate + ftimes
casedates = startdate + times

lastdate = tail(casedates,1)

# Turn off scientific notation on all axes (set scipen to 0 to enable scientific notation)
options(scipen=999)

# Convert dates from ggplot numeric to plotly numeric
dt = function(dates){as.numeric(as.POSIXct(dates))*1000}
```

Inputs {.sidebar}
-----------------------------------------------------------------------

<a href="#"> Michigan Data </a>

<a href="#"> University of Michigan Data </a>


Row {data-height=600}
-----------------------------------------------------------------------

```{r calcs, echo=FALSE,warning=FALSE,message=FALSE,error=FALSE}

#Calculate bounds
index= likesample<quantile(likesample,0.95)
ymin = apply(yobsincsample[,index], 1, min)
ymax = apply(yobsincsample[,index], 1, max)
ymed = apply(yobsincsample[,index], 1, median)
deathmin = apply(yobsdeathsample[,index], 1, min)
deathmax = apply(yobsdeathsample[,index], 1, max)
deathmed = apply(yobsdeathsample[,index], 1, median)
ICUmin = apply(ycurrICUsample[,index], 1, min)
ICUmax = apply(ycurrICUsample[,index], 1, max)
ICUmed = apply(ycurrICUsample[,index], 1, median)
O2min = apply(ycurrO2sample[,index], 1, min)
O2max = apply(ycurrO2sample[,index], 1, max)
O2med = apply(ycurrO2sample[,index], 1, median)
patmin = apply(ycurrpatsample[,index], 1, min)
patmax = apply(ycurrpatsample[,index], 1, max)
patmed = apply(ycurrpatsample[,index], 1, median)
ventmin = apply(ycurrventsample[,index], 1, min)
ventmax = apply(ycurrventsample[,index], 1, max)
ventmed = apply(ycurrventsample[,index], 1, median)

#Something seems off about this line, at least when I check it, the browser says there's an issue at tx0
xestlh = ode(x0(paramestslh), ftimes, CoVode, paramestslh)

```

### One Week Forecast of COVID-19 Cases in Michigan 

<!-- i added an iframe element here just in case i can get this graphic on shiny instead -->
<!-- <iframe></iframe> -->
```{r forecastplot1wk, echo=FALSE,message=FALSE,warning=FALSE,error=FALSE}

# Detected/observed cumulative incidence

end = (lastdate + 7) - startdate + 1

ybestfit = yobscumcarefun(xestlh,paramestslh)


# I think this initializes the data frame
plotdata = data.frame(dates[1:end],dt(dates[1:end]),ybestfit[1:end],ymed[1:end],ymin[1:end],ymax[1:end],
                 c(casedates, rep(NA, length(ftimes[1:end]) - length(casedates))), 
                 dt(c(casedates, rep(NA, length(ftimes[1:end]) - length(casedates)))), 
                 c(cases, rep(NA, length(ftimes[1:end]) - length(casedates))) )
colnames(plotdata) = cbind("Date","NumericDate","BestFit","Median","Min","Max","CDates","NumericCDates","Cases")

# I think this generates the plot and the aesthetics
# I think setting group = 1 throws a "deprecated" error for dplyr
forecastplot = ggplot(plotdata) +
  geom_line(aes(x=NumericDate,y=BestFit, text = paste("Date:",Date,"<br>Best fit:",round(BestFit)), group=1, 
                linetype = "Best fit")) +
  geom_line(aes(x=NumericDate,y=Median, text = paste("Date:",Date,"<br>Median:",round(Median)), group=1, 
                linetype = "Median")) +
  geom_ribbon(aes(ymin=Min, ymax=Max, x=NumericDate,
                  text = paste("Date:",Date,"<br>Min:",round(Min),"<br>Max:",round(Max)), group=1), 
              alpha = 0.3) +
  geom_point(aes(x=NumericCDates, y=Cases, text = paste("Date:",Date,"<br>Cases:",round(Cases))  )) +
  guides(fill = guide_legend(''), colour = guide_legend(''), linetype = guide_legend('')) +
  labs(x="Date", y="Cumulative Lab-Confirmed Cases")
  
# I want to use responsive widths and heights for this ggplotly, but that throws an error.
# in fact, NOT specifying a width and height here throws an error
ggplotly(forecastplot, width=350, height=300,
         tooltip = c("text")) %>%
  layout(legend = list(x = 0.05, y = 0.9,
      orientation = "h"),
      xaxis = list(
        type = 'date',
        tickformat = "%b %d"
        )
  )
  
```

### Three Week Forecast of COVID-19 Cases in Michigan 
<!-- <iframe></iframe> -->
```{r deathplot, echo=FALSE,message=FALSE,warning=FALSE,error=FALSE}

end = (lastdate + 21) - startdate + 1

deathsbestfit = yobscumdeathfun(xestlh,paramestslh)

plotdata = data.frame(dates[1:end],dt(dates[1:end]),deathsbestfit[1:end],deathmed[1:end],deathmin[1:end],deathmax[1:end],
                 c(deathtimes, rep(NA, length(ftimes[1:end]) - length(deathtimes))), 
                 dt(c(deathtimes, rep(NA, length(ftimes[1:end]) - length(deathtimes)))), 
                 c(deaths, rep(NA, length(ftimes[1:end]) - length(deathtimes))) )
colnames(plotdata) = cbind("Date","NumericDate","BestFit","Median","Min","Max","DDates","NumericDDates","Deaths")

# Detected/observed deaths
deathplot = ggplot(plotdata) +
  geom_line(aes(x=NumericDate,y=BestFit, text = paste("Date:",Date,"<br>Best fit:",round(BestFit)), group=1, 
                linetype = "Best fit")) +
  geom_line(aes(x=NumericDate,y=Median, text = paste("Date:",Date,"<br>Median:",round(Median)), group=1, 
                linetype = "Median")) +
  geom_ribbon(aes(ymin=Min, ymax=Max, x=NumericDate,
                  text = paste("Date:",Date,"<br>Min:",round(Min),"<br>Max:",round(Max)), group=1), 
              alpha = 0.3) +
  geom_point(aes(x=NumericDDates, y=Deaths, text = paste("Date:",Date,"<br>Deaths:",round(Deaths))  )) +
  guides(fill = guide_legend(''), colour = guide_legend(''), linetype = guide_legend('')) +
  labs(x="Date", y="Cumulative Lab-Confirmed Deaths")

ggplotly(deathplot, width=350, height=300, tooltip = c("text")) %>%
  layout(legend = list(x = 0.05, y = 0.9,
      orientation = "h"),
      xaxis = list(
        type = 'date',
        tickformat = "%b %d"
        )
  )

```


Row {data-height=500}
-----------------------------------------------------------------------


### Current Summary

Model forecast for cumulative lab-confirmed cases:

```{r forecasttable}
forecasttable = c()
forecasttable = rbind(forecasttable,
                      c(paste(format(lastdate+7, "%B %e"),'(1 week)'),
                      format(round_any(ymin[(lastdate + 7) - startdate + 1],1), scientific=F),
                      format(round_any(yobscumcarefun(xestlh,paramestslh)[(lastdate + 7) - startdate + 1],1), scientific=F),

                      format(round_any(ymax[(lastdate + 7) - startdate + 1],1), scientific=F) ) )
forecasttable = rbind(forecasttable,
                      c(paste(format(lastdate+21, "%B %e"),'(3 weeks)'),
                      format(round_any(ymin[(lastdate + 21) - startdate + 1],1), scientific=F),
                      format(round_any(yobscumcarefun(xestlh,paramestslh)[(lastdate + 21) - startdate + 1],1), scientific=F),

                      format(round_any(ymax[(lastdate + 21) - startdate + 1],1), scientific=F) ) )
forecasttable = as.data.frame(forecasttable)

colnames(forecasttable) = c("Date", "Uncertainty lower bound", "Best-fit", "Uncertainty upper bound")
knitr::kable(forecasttable)
```

Additionally, the current best fit across model simulations projects (for uncertainty ranges, please see plots):

- `r format(lastdate+7, "%B %e, %Y")` (1 week): roughly `r round_any(ycurrpatfun(xestlh,paramestslh)[(lastdate + 7) - startdate + 1],100)` COVID+ hospitalized patients (beds needed) with roughly `r round_any(ycurrICUfun(xestlh,paramestslh)[(lastdate + 7) - startdate + 1],10)` in ICU
- `r format(lastdate+21, "%B %e, %Y")` (3 weeks): roughly `r round_any(ycurrpatfun(xestlh,paramestslh)[(lastdate + 21) - startdate + 1],100)` COVID+ hospitalized patients (beds needed) with roughly `r round_any(ycurrICUfun(xestlh,paramestslh)[(lastdate + 21) - startdate + 1],10)` in ICU

<p style="font-size: 10pt; font-style: oblique"> Note that the model is a work in progress and being updated as the epidemic progresses. Because we are still making improvements and including new data in the model, these results are highly preliminary and uncertain. The forecasts shown here also do not account for the ongoing changes in social distancing occurring over the coming weeks. For more on social distancing, see the 'Scenarios' tab.</p>

<p style="font-size: 10pt"> For more information about the transmission model and methods, please see the 'About' tab.</p>


<p style="font-size: 10pt">Data is shown as circles and grey shaded regions indicate uncertainty bounds for the best fit 95% across 1000 simulations. Hover over plots to see data values and interactive menu, and scroll down to see additional plots.</p>

*Updated `r format(Sys.time(), "%B %e, %Y at %H:%M %Z")`*

Cumulative Deaths {data-navmenu="Explorables"}
===================================== 

Inputs {.sidebar}
-----------------------------------------------------------------------

<a href="#"> Michigan Data </a>

<a href="#"> University of Michigan Data </a>


Row {data-height=300}
-----------------------------------------------------------------------

```{r calcs2, echo=FALSE,warning=FALSE,message=FALSE,error=FALSE}

#Calculate bounds
index= likesample<quantile(likesample,0.95)
ymin = apply(yobsincsample[,index], 1, min)
ymax = apply(yobsincsample[,index], 1, max)
ymed = apply(yobsincsample[,index], 1, median)
deathmin = apply(yobsdeathsample[,index], 1, min)
deathmax = apply(yobsdeathsample[,index], 1, max)
deathmed = apply(yobsdeathsample[,index], 1, median)
ICUmin = apply(ycurrICUsample[,index], 1, min)
ICUmax = apply(ycurrICUsample[,index], 1, max)
ICUmed = apply(ycurrICUsample[,index], 1, median)
O2min = apply(ycurrO2sample[,index], 1, min)
O2max = apply(ycurrO2sample[,index], 1, max)
O2med = apply(ycurrO2sample[,index], 1, median)
patmin = apply(ycurrpatsample[,index], 1, min)
patmax = apply(ycurrpatsample[,index], 1, max)
patmed = apply(ycurrpatsample[,index], 1, median)
ventmin = apply(ycurrventsample[,index], 1, min)
ventmax = apply(ycurrventsample[,index], 1, max)
ventmed = apply(ycurrventsample[,index], 1, median)

#Something seems off about this line, at least when I check it, the browser says there's an issue at tx0
xestlh = ode(x0(paramestslh), ftimes, CoVode, paramestslh)

```

### One Week Forecast of COVID-19 Deaths in Michigan

<!-- i added an iframe element here just in case i can get this graphic on shiny instead -->
<!-- <iframe></iframe> -->
```{r}
  
```

### Three Week Forecast of COVID-19 Deaths in Michigan
<!-- i added an iframe element here just in case i can get this graphic on shiny instead -->
<!-- <iframe></iframe> -->
```{r}
  
```



Row {data-height=500}
-----------------------------------------------------------------------


### Current Summary

Model forecast for cumulative lab-confirmed cases:

```{r forecasttable2}
forecasttable = c()
forecasttable = rbind(forecasttable,
                      c(paste(format(lastdate+7, "%B %e"),'(1 week)'),
                      format(round_any(ymin[(lastdate + 7) - startdate + 1],1), scientific=F),
                      format(round_any(yobscumcarefun(xestlh,paramestslh)[(lastdate + 7) - startdate + 1],1), scientific=F),

                      format(round_any(ymax[(lastdate + 7) - startdate + 1],1), scientific=F) ) )
forecasttable = rbind(forecasttable,
                      c(paste(format(lastdate+21, "%B %e"),'(3 weeks)'),
                      format(round_any(ymin[(lastdate + 21) - startdate + 1],1), scientific=F),
                      format(round_any(yobscumcarefun(xestlh,paramestslh)[(lastdate + 21) - startdate + 1],1), scientific=F),

                      format(round_any(ymax[(lastdate + 21) - startdate + 1],1), scientific=F) ) )
forecasttable = as.data.frame(forecasttable)

colnames(forecasttable) = c("Date", "Uncertainty lower bound", "Best-fit", "Uncertainty upper bound")
knitr::kable(forecasttable)
```

Additionally, the current best fit across model simulations projects (for uncertainty ranges, please see plots):

- `r format(lastdate+7, "%B %e, %Y")` (1 week): roughly `r round_any(ycurrpatfun(xestlh,paramestslh)[(lastdate + 7) - startdate + 1],100)` COVID+ hospitalized patients (beds needed) with roughly `r round_any(ycurrICUfun(xestlh,paramestslh)[(lastdate + 7) - startdate + 1],10)` in ICU
- `r format(lastdate+21, "%B %e, %Y")` (3 weeks): roughly `r round_any(ycurrpatfun(xestlh,paramestslh)[(lastdate + 21) - startdate + 1],100)` COVID+ hospitalized patients (beds needed) with roughly `r round_any(ycurrICUfun(xestlh,paramestslh)[(lastdate + 21) - startdate + 1],10)` in ICU

<p style="font-size: 10pt; font-style: oblique"> Note that the model is a work in progress and being updated as the epidemic progresses. Because we are still making improvements and including new data in the model, these results are highly preliminary and uncertain. The forecasts shown here also do not account for the ongoing changes in social distancing occurring over the coming weeks. For more on social distancing, see the 'Scenarios' tab.</p>

<p style="font-size: 10pt"> For more information about the transmission model and methods, please see the 'About' tab.</p>


<p style="font-size: 10pt">Data is shown as circles and grey shaded regions indicate uncertainty bounds for the best fit 95% across 1000 simulations. Hover over plots to see data values and interactive menu, and scroll down to see additional plots.</p>

*Updated `r format(Sys.time(), "%B %e, %Y at %H:%M %Z")`*


    
Hospital and ICU Occupancy {data-navmenu="Explorables"}
===================================== 

Inputs {.sidebar}
-----------------------------------------------------------------------

<a href="#"> Michigan Data </a>

<a href="#"> University of Michigan Data </a>


Row {data-height=300}
-----------------------------------------------------------------------

```{r calcs3, echo=FALSE,warning=FALSE,message=FALSE,error=FALSE}

#Calculate bounds
index= likesample<quantile(likesample,0.95)
ymin = apply(yobsincsample[,index], 1, min)
ymax = apply(yobsincsample[,index], 1, max)
ymed = apply(yobsincsample[,index], 1, median)
deathmin = apply(yobsdeathsample[,index], 1, min)
deathmax = apply(yobsdeathsample[,index], 1, max)
deathmed = apply(yobsdeathsample[,index], 1, median)
ICUmin = apply(ycurrICUsample[,index], 1, min)
ICUmax = apply(ycurrICUsample[,index], 1, max)
ICUmed = apply(ycurrICUsample[,index], 1, median)
O2min = apply(ycurrO2sample[,index], 1, min)
O2max = apply(ycurrO2sample[,index], 1, max)
O2med = apply(ycurrO2sample[,index], 1, median)
patmin = apply(ycurrpatsample[,index], 1, min)
patmax = apply(ycurrpatsample[,index], 1, max)
patmed = apply(ycurrpatsample[,index], 1, median)
ventmin = apply(ycurrventsample[,index], 1, min)
ventmax = apply(ycurrventsample[,index], 1, max)
ventmed = apply(ycurrventsample[,index], 1, median)

#Something seems off about this line, at least when I check it, the browser says there's an issue at tx0
xestlh = ode(x0(paramestslh), ftimes, CoVode, paramestslh)

```

### Three Week Forecast of COVID-19 Hospital Occupancy in Michigan

<!-- i added an iframe element here just in case i can get this graphic on shiny instead -->
<!-- <iframe></iframe> -->
```{r}
  
```

### Three Week Forecast of COVID-19 ICU Occupancy in Michigan
<!-- i added an iframe element here just in case i can get this graphic on shiny instead -->
<!-- <iframe></iframe> -->
```{r}
  
```



Row {data-height=500}
-----------------------------------------------------------------------


### Current Summary

Model forecast for cumulative lab-confirmed cases:

```{r forecasttable3}
forecasttable = c()
forecasttable = rbind(forecasttable,
                      c(paste(format(lastdate+7, "%B %e"),'(1 week)'),
                      format(round_any(ymin[(lastdate + 7) - startdate + 1],1), scientific=F),
                      format(round_any(yobscumcarefun(xestlh,paramestslh)[(lastdate + 7) - startdate + 1],1), scientific=F),

                      format(round_any(ymax[(lastdate + 7) - startdate + 1],1), scientific=F) ) )
forecasttable = rbind(forecasttable,
                      c(paste(format(lastdate+21, "%B %e"),'(3 weeks)'),
                      format(round_any(ymin[(lastdate + 21) - startdate + 1],1), scientific=F),
                      format(round_any(yobscumcarefun(xestlh,paramestslh)[(lastdate + 21) - startdate + 1],1), scientific=F),

                      format(round_any(ymax[(lastdate + 21) - startdate + 1],1), scientific=F) ) )
forecasttable = as.data.frame(forecasttable)

colnames(forecasttable) = c("Date", "Uncertainty lower bound", "Best-fit", "Uncertainty upper bound")
knitr::kable(forecasttable)
```

Additionally, the current best fit across model simulations projects (for uncertainty ranges, please see plots):

- `r format(lastdate+7, "%B %e, %Y")` (1 week): roughly `r round_any(ycurrpatfun(xestlh,paramestslh)[(lastdate + 7) - startdate + 1],100)` COVID+ hospitalized patients (beds needed) with roughly `r round_any(ycurrICUfun(xestlh,paramestslh)[(lastdate + 7) - startdate + 1],10)` in ICU
- `r format(lastdate+21, "%B %e, %Y")` (3 weeks): roughly `r round_any(ycurrpatfun(xestlh,paramestslh)[(lastdate + 21) - startdate + 1],100)` COVID+ hospitalized patients (beds needed) with roughly `r round_any(ycurrICUfun(xestlh,paramestslh)[(lastdate + 21) - startdate + 1],10)` in ICU

<p style="font-size: 10pt; font-style: oblique"> Note that the model is a work in progress and being updated as the epidemic progresses. Because we are still making improvements and including new data in the model, these results are highly preliminary and uncertain. The forecasts shown here also do not account for the ongoing changes in social distancing occurring over the coming weeks. For more on social distancing, see the 'Scenarios' tab.</p>

<p style="font-size: 10pt"> For more information about the transmission model and methods, please see the 'About' tab.</p>


<p style="font-size: 10pt">Data is shown as circles and grey shaded regions indicate uncertainty bounds for the best fit 95% across 1000 simulations. Hover over plots to see data values and interactive menu, and scroll down to see additional plots.</p>

*Updated `r format(Sys.time(), "%B %e, %Y at %H:%M %Z")`*

    
Ventilator and Oxygen Support {data-navmenu="Explorables"}
===================================== 

Inputs {.sidebar}
-----------------------------------------------------------------------

<a href="#"> Michigan Data </a>

<a href="#"> University of Michigan Data </a>


Row {data-height=300}
-----------------------------------------------------------------------

```{r calcs4, echo=FALSE,warning=FALSE,message=FALSE,error=FALSE}

#Calculate bounds
index= likesample<quantile(likesample,0.95)
ymin = apply(yobsincsample[,index], 1, min)
ymax = apply(yobsincsample[,index], 1, max)
ymed = apply(yobsincsample[,index], 1, median)
deathmin = apply(yobsdeathsample[,index], 1, min)
deathmax = apply(yobsdeathsample[,index], 1, max)
deathmed = apply(yobsdeathsample[,index], 1, median)
ICUmin = apply(ycurrICUsample[,index], 1, min)
ICUmax = apply(ycurrICUsample[,index], 1, max)
ICUmed = apply(ycurrICUsample[,index], 1, median)
O2min = apply(ycurrO2sample[,index], 1, min)
O2max = apply(ycurrO2sample[,index], 1, max)
O2med = apply(ycurrO2sample[,index], 1, median)
patmin = apply(ycurrpatsample[,index], 1, min)
patmax = apply(ycurrpatsample[,index], 1, max)
patmed = apply(ycurrpatsample[,index], 1, median)
ventmin = apply(ycurrventsample[,index], 1, min)
ventmax = apply(ycurrventsample[,index], 1, max)
ventmed = apply(ycurrventsample[,index], 1, median)

#Something seems off about this line, at least when I check it, the browser says there's an issue at tx0
xestlh = ode(x0(paramestslh), ftimes, CoVode, paramestslh)

```    

### One Week Forecast of COVID-19 Ventilator Support in Michigan

<!-- i added an iframe element here just in case i can get this graphic on shiny instead -->
<!-- <iframe></iframe> -->
```{r}
  
```

### Three Week Forecast of COVID-19 Oxygen Support in Michigan
<!-- i added an iframe element here just in case i can get this graphic on shiny instead -->
<!-- <iframe></iframe> -->
```{r}
  
```



Row {data-height=500}
-----------------------------------------------------------------------


### Current Summary

Model forecast for cumulative lab-confirmed cases:

```{r forecasttable4}
forecasttable = c()
forecasttable = rbind(forecasttable,
                      c(paste(format(lastdate+7, "%B %e"),'(1 week)'),
                      format(round_any(ymin[(lastdate + 7) - startdate + 1],1), scientific=F),
                      format(round_any(yobscumcarefun(xestlh,paramestslh)[(lastdate + 7) - startdate + 1],1), scientific=F),

                      format(round_any(ymax[(lastdate + 7) - startdate + 1],1), scientific=F) ) )
forecasttable = rbind(forecasttable,
                      c(paste(format(lastdate+21, "%B %e"),'(3 weeks)'),
                      format(round_any(ymin[(lastdate + 21) - startdate + 1],1), scientific=F),
                      format(round_any(yobscumcarefun(xestlh,paramestslh)[(lastdate + 21) - startdate + 1],1), scientific=F),

                      format(round_any(ymax[(lastdate + 21) - startdate + 1],1), scientific=F) ) )
forecasttable = as.data.frame(forecasttable)

colnames(forecasttable) = c("Date", "Uncertainty lower bound", "Best-fit", "Uncertainty upper bound")
knitr::kable(forecasttable)
```

Additionally, the current best fit across model simulations projects (for uncertainty ranges, please see plots):

- `r format(lastdate+7, "%B %e, %Y")` (1 week): roughly `r round_any(ycurrpatfun(xestlh,paramestslh)[(lastdate + 7) - startdate + 1],100)` COVID+ hospitalized patients (beds needed) with roughly `r round_any(ycurrICUfun(xestlh,paramestslh)[(lastdate + 7) - startdate + 1],10)` in ICU
- `r format(lastdate+21, "%B %e, %Y")` (3 weeks): roughly `r round_any(ycurrpatfun(xestlh,paramestslh)[(lastdate + 21) - startdate + 1],100)` COVID+ hospitalized patients (beds needed) with roughly `r round_any(ycurrICUfun(xestlh,paramestslh)[(lastdate + 21) - startdate + 1],10)` in ICU

<p style="font-size: 10pt; font-style: oblique"> Note that the model is a work in progress and being updated as the epidemic progresses. Because we are still making improvements and including new data in the model, these results are highly preliminary and uncertain. The forecasts shown here also do not account for the ongoing changes in social distancing occurring over the coming weeks. For more on social distancing, see the 'Scenarios' tab.</p>

<p style="font-size: 10pt"> For more information about the transmission model and methods, please see the 'About' tab.</p>


<p style="font-size: 10pt">Data is shown as circles and grey shaded regions indicate uncertainty bounds for the best fit 95% across 1000 simulations. Hover over plots to see data values and interactive menu, and scroll down to see additional plots.</p>

*Updated `r format(Sys.time(), "%B %e, %Y at %H:%M %Z")`*


Social Distancing Scenarios {data-navmenu="Explorables"}
===================================== 

Inputs {.sidebar}
-----------------------------------------------------------------------

<a href="#"> Michigan Data </a>

<a href="#"> University of Michigan Data </a>


Row {data-height=300}
-----------------------------------------------------------------------

```{r calcs5, echo=FALSE,warning=FALSE,message=FALSE,error=FALSE}

#Calculate bounds
index= likesample<quantile(likesample,0.95)
ymin = apply(yobsincsample[,index], 1, min)
ymax = apply(yobsincsample[,index], 1, max)
ymed = apply(yobsincsample[,index], 1, median)
deathmin = apply(yobsdeathsample[,index], 1, min)
deathmax = apply(yobsdeathsample[,index], 1, max)
deathmed = apply(yobsdeathsample[,index], 1, median)
ICUmin = apply(ycurrICUsample[,index], 1, min)
ICUmax = apply(ycurrICUsample[,index], 1, max)
ICUmed = apply(ycurrICUsample[,index], 1, median)
O2min = apply(ycurrO2sample[,index], 1, min)
O2max = apply(ycurrO2sample[,index], 1, max)
O2med = apply(ycurrO2sample[,index], 1, median)
patmin = apply(ycurrpatsample[,index], 1, min)
patmax = apply(ycurrpatsample[,index], 1, max)
patmed = apply(ycurrpatsample[,index], 1, median)
ventmin = apply(ycurrventsample[,index], 1, min)
ventmax = apply(ycurrventsample[,index], 1, max)
ventmed = apply(ycurrventsample[,index], 1, median)

#Something seems off about this line, at least when I check it, the browser says there's an issue at tx0
xestlh = ode(x0(paramestslh), ftimes, CoVode, paramestslh)

```
### Social Distancing Scenarios

```{r}
# I really want to do something like below for the rest of the models
```

<iframe id="socialdistancing" src="https://sph-umich.shinyapps.io/covid-19-scenarios/" style="border: none; width: 100%; height: 700px" frameborder="0"></iframe>